fluid = 'R134a.fld';
T1 = -30+273;
X1 = 1;
T2 = 30+273;
[P1,H1,S1] = refpropm('PHS','T',T1,'Q',X1,fluid);
S2 = S1;
[P2,H2] = refpropm('PH','T',T2,'S',S2,fluid);
P3 = P2;
X3 = 1;
[T3,H3,S3] = refpropm('THS','P',P3,'Q',X3,fluid);
X4 = 0;
P4 = P3;
[T4,H4,S4] = refpropm('THS','P',P4,'Q',X4,fluid);
P5 = P1;
H5 = H4;
[T5,X5,S5] = refpropm('TQS','P',P5,'H',H5,fluid);
wevap = H1-H5;
wcomp = H2-H1;
cop = (wevap-wcomp)/wcomp;